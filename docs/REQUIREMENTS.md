# 同志社系列学校向けWEBメディアサイト - 要件定義書

## プロジェクト概要

### 目的
- 同志社の学生たちが盛り上がるような記事コンテンツ配信を行い活性化
- 学生コミュニティの交流促進と情報共有

### ターゲットユーザー
- **メイン**: 同志社大学の学生
- **サブ**: 同志社系列中高の学生、教授、OB、保護者

---

## 機能要件

### 1. パブリック機能（メディアサイト）

#### 1.1 記事表示機能
- 記事一覧ページの表示
- 記事詳細ページの表示
- Markdownで書かれた記事のHTML変換表示

#### 1.2 カテゴリ機能
- **対応カテゴリ**:
  - ニュース
  - コラム  
  - インタビュー
  - アンケート企画
- カテゴリ別記事一覧の表示
- カテゴリフィルタリング機能

#### 1.3 記事管理
- 公開/非公開ステータス管理
- 投稿日時の管理

### 2. 管理機能（Admin）

#### 2.1 認証機能
- 管理者ログイン機能のみ実装
- 一般ユーザー登録は不要
- **実装詳細**:
  - NextAuth.jsによるセッション管理
  - ミドルウェアでの/admin/*ルート保護
  - 未認証時は/admin/loginへ自動リダイレクト
  - 環境変数による管理者認証情報の管理

#### 2.2 記事投稿・編集機能
- **記事フォーム項目**:
  - タイトル（必須）
  - カテゴリ選択（必須）
  - 本文（Markdown形式、必須）
  - 公開状態（ドラフト/公開）
  - 投稿日時
- Markdownエディタ（リアルタイムプレビュー付き）
- 記事の新規作成・編集・削除

#### 2.3 管理画面
- 記事一覧・管理ダッシュボード
- 記事の公開状態切り替え
- 記事の編集・削除

---

## 非機能要件

### 1. 実装しない機能（将来実装予定）
- ユーザー登録・ログイン
- コメント機能
- いいね機能
- 画像アップロード
- アンケート機能
- 下書き自動保存

### 2. 技術要件
- SEO対応（SSG/SSR）
- レスポンシブデザイン
- 高速表示

---

## 技術スタック

### 推奨構成
- **フロントエンド**: Next.js 14 (App Router)
- **バックエンド**: Next.js API Routes（フルスタック構成）
- **データベース**: PostgreSQL (Supabase)
- **認証**: NextAuth.js
- **スタイリング**: Tailwind CSS
- **Markdown処理**: react-markdown + remark-gfm
- **Markdownエディタ**: @uiw/react-md-editor
- **デプロイ**: Vercel

### 理由
- 開発工数の最小化
- 統合開発環境
- 将来の機能拡張への対応
- 運用コストの削減

---

## データベース設計

### テーブル: posts
```sql
posts {
  id: UUID (Primary Key)
  title: VARCHAR(255) NOT NULL
  content: TEXT NOT NULL (Markdown)
  category: VARCHAR(50) NOT NULL
  status: ENUM('draft', 'published') DEFAULT 'draft'
  published_at: TIMESTAMP
  created_at: TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  updated_at: TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  author_id: UUID (管理者ID)
}
```

---

## URL構成

### パブリック
```
/                    // トップページ（記事一覧）
/posts/[id]         // 記事詳細ページ
/category/[category] // カテゴリ別記事一覧
```

### 管理者
```
/admin/login        // 管理者ログインページ
/admin/dashboard    // 記事一覧・管理画面
/admin/posts/new    // 新規記事作成
/admin/posts/[id]   // 記事編集
```

---

## 開発優先順位

### Phase 1: 基本機能
1. プロジェクトセットアップ
2. データベースセットアップ
3. 管理者認証機能
4. 記事CRUD機能
5. Markdownエディタ実装

### Phase 2: フロントエンド
1. 記事一覧ページ
2. 記事詳細ページ
3. カテゴリ機能
4. レスポンシブデザイン

### Phase 3: 最適化
1. SEO対応
2. パフォーマンス最適化
3. エラーハンドリング

---

## 将来の拡張予定
- 画像アップロード機能
- アンケート機能
- コメント機能
- いいね機能
- ユーザー登録機能
- 記事検索機能

---

*最終更新: 2025年9月2日*